alerts:
- rule: DEPLOYMENT_FAILED
- rule: DOMAIN_FAILED
envs:
- key: PGHOST
  scope: RUN_AND_BUILD_TIME
  value: ep-long-wave-a4wf9n65.us-east-1.aws.neon.tech
- key: PGDATABASE
  scope: RUN_AND_BUILD_TIME
  value: neondb
- key: PGUSER
  scope: RUN_AND_BUILD_TIME
  value: neondb_owner
- key: PGPASSWORD
  scope: RUN_AND_BUILD_TIME
  value: ompc35GJVLTM
features:
- buildpack-stack=ubuntu-22
ingress:
  rules:
  - component:
      name: django-neon-quickstart
    match:
      path:
        prefix: /
name: urchin-app
region: nyc
services:
- environment_slug: python
  envs:
  - key: PGHOST
    scope: RUN_AND_BUILD_TIME
    value: ${{ steps.create-branch.outputs.host }}
  - key: PGDATABASE
    scope: RUN_AND_BUILD_TIME
    value: neondb
  - key: PGUSER
    scope: RUN_AND_BUILD_TIME
    value: neondb_owner
  - key: PGPASSWORD
    scope: RUN_AND_BUILD_TIME
    value: ${{ steps.create-branch.outputs.password }}
  github:
    branch: dev
    deploy_on_push: true
    repo: dougsillars/django-neon-quickstart
  http_port: 8000
  instance_count: 1
  instance_size_slug: apps-s-1vcpu-0.5gb
  name: django-neon-quickstart
  run_command: 
    pip install -r requirements.txt
    python manage.py makemigrations
    python manage.py migrate
    gunicorn django_neon.wsgi:application --bind 0.0.0.0:8000
  source_dir: /
